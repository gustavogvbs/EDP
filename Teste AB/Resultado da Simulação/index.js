const htmlHero = `<div class="theme_marineBlue__electricGreen-std hero-result__test">
			<div class="wrapper-hero-result__test">
				<div class="wrapper-content__test">
					<p class="text-hero__test">
						<span> Resultado da simulação </span> Energia Solar EDP
					</p>
					<h2 class="title-hero__test">
						Saiba como vai
						poupar com os Painéis Solares da EDP
					</h2>
					<div class="container-info-hero__test">
						<div class="wrapper-info-hero__test">
							<p class="text-info__test">Painéis</p>
							<p class="text-info-green__test" id="paineis-result">-</p>
							<div class="image-info__test">
								<svg
									width="22"
									height="23"
									viewBox="0 0 22 23"
									fill="none"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										d="M20.3613 7.16406C20.3613 9.09766 20 10.9043 19.2773 12.584C18.5547 14.2637 17.5635 15.7334 16.3037 16.9932C15.0439 18.2529 13.5742 19.2539 11.8945 19.9961C10.1953 20.7188 8.38867 21.0801 6.47461 21.0801H2.05078L11.2207 11.9102L10.3711 11.0605L1.20117 20.2305V15.8066C1.20117 13.8926 1.57227 12.0859 2.31445 10.3867C3.03711 8.70703 4.02832 7.2373 5.28809 5.97754C6.54785 4.71777 8.01758 3.72656 9.69727 3.00391C11.3965 2.26172 13.2031 1.89062 15.1172 1.89062H20.3613V7.16406ZM15.1172 0.689453C13.0273 0.689453 11.0645 1.08984 9.22852 1.89062C7.39258 2.69141 5.79102 3.77539 4.42383 5.14258C3.05664 6.50977 1.98242 8.10156 1.20117 9.91797C0.400391 11.7539 0 13.7168 0 15.8066V22.2812H6.47461C8.56445 22.2812 10.5273 21.8809 12.3633 21.0801C14.1797 20.2988 15.7715 19.2246 17.1387 17.8574C18.5059 16.4902 19.5898 14.8887 20.3906 13.0527C21.1719 11.2168 21.5625 9.25391 21.5625 7.16406V0.689453H15.1172Z"
										fill="#28FF52"
									></path>
								</svg>
							</div>
						</div>
						
						<div class="wrapper-info-hero__test">
							<p class="text-info__test">Redução consumo da rede</p>
							<p class="text-info-green__test" id="reducao-consumo-da-rede-result">-</p>
							<div class="image-info__test">
								<svg
									width="15"
									height="22"
									viewBox="0 0 15 22"
									fill="none"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										d="M12.9492 7.80664C13.1055 7.80664 13.2422 7.86523 13.3594 7.98242C13.4766 8.09961 13.5352 8.23633 13.5352 8.39258C13.5352 8.54883 13.4766 8.68555 13.3594 8.80273C13.2422 8.91992 13.1055 8.97852 12.9492 8.97852C12.7734 8.97852 12.627 8.91992 12.5098 8.80273C12.3926 8.68555 12.334 8.54883 12.334 8.39258C12.334 8.23633 12.3926 8.09961 12.5098 7.98242C12.627 7.86523 12.7734 7.80664 12.9492 7.80664ZM14.7363 8.39258C14.7363 7.9043 14.5605 7.48438 14.209 7.13281C13.8574 6.78125 13.4375 6.60547 12.9492 6.60547C12.4414 6.60547 12.0117 6.78125 11.6602 7.13281C11.3086 7.48438 11.1328 7.9043 11.1328 8.39258C11.1328 8.7832 11.25 9.12988 11.4844 9.43262C11.7188 9.73535 12.002 9.95508 12.334 10.0918V17.3281C12.334 18.207 12.0264 18.9541 11.4111 19.5693C10.7959 20.1846 10.0488 20.4922 9.16992 20.4922C8.31055 20.4922 7.56836 20.1846 6.94336 19.5693C6.31836 18.9541 6.00586 18.207 6.00586 17.3281V14.0762H8.23242L10.8105 0.804688H7.73438V2.00586H9.3457L7.23633 12.875H6.00586V10.6191H4.80469V12.875H3.60352L1.46484 2.00586H3.10547V0.804688H0L2.60742 14.0762H4.80469V17.3281C4.80469 18.5391 5.23438 19.5693 6.09375 20.4189C6.95312 21.2686 7.97852 21.6934 9.16992 21.6934C10.3809 21.6934 11.4111 21.2686 12.2607 20.4189C13.1104 19.5693 13.5352 18.5391 13.5352 17.3281V10.0918C13.8867 9.95508 14.1748 9.73535 14.3994 9.43262C14.624 9.12988 14.7363 8.7832 14.7363 8.39258Z"
										fill="#28FF52"
									></path>
								</svg>
							</div>
						</div>
						<div class="wrapper-info-hero__test">
							<p class="text-info__test">Poupança Anual Estimada</p>
							<p class="text-info-green__test" id="poupanca-anual-result">-</p>
							<div class="image-info__test">
								<svg
									width="12"
									height="24"
									viewBox="0 0 12 24"
									fill="none"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										d="M7.5 9.31641L7.17773 9.49219V21.0352C7.17773 21.4844 7.0166 21.8701 6.69434 22.1924C6.37207 22.5146 5.98633 22.6758 5.53711 22.6758C5.06836 22.6758 4.67773 22.5146 4.36523 22.1924C4.05273 21.8701 3.89648 21.4844 3.89648 21.0352V9.49219L3.54492 9.31641C2.82227 8.94531 2.25098 8.41309 1.83105 7.71973C1.41113 7.02637 1.20117 6.2793 1.20117 5.47852C1.20117 4.75586 1.3623 4.08203 1.68457 3.45703C2.00684 2.83203 2.45117 2.32422 3.01758 1.93359V4.33594L5.53711 5.77148L8.02734 4.33594V1.93359C8.59375 2.32422 9.04297 2.83203 9.375 3.45703C9.70703 4.08203 9.87305 4.75586 9.87305 5.47852C9.87305 6.2793 9.6582 7.02637 9.22852 7.71973C8.79883 8.41309 8.22266 8.94531 7.5 9.31641ZM7.64648 0.351562L6.82617 0V3.63281L5.53711 4.39453L4.21875 3.63281V0L3.39844 0.351562C2.36328 0.78125 1.53809 1.45996 0.922852 2.3877C0.307617 3.31543 0 4.3457 0 5.47852C0 6.45508 0.239258 7.36328 0.717773 8.20312C1.19629 9.04297 1.85547 9.7168 2.69531 10.2246V21.0352C2.69531 21.8164 2.96875 22.4854 3.51562 23.042C4.0625 23.5986 4.73633 23.877 5.53711 23.877C6.31836 23.877 6.9873 23.5986 7.54395 23.042C8.10059 22.4854 8.37891 21.8164 8.37891 21.0352V10.2246C9.19922 9.7168 9.85352 9.04297 10.3418 8.20312C10.8301 7.36328 11.0742 6.45508 11.0742 5.47852C11.0742 4.3457 10.7617 3.31543 10.1367 2.3877C9.51172 1.45996 8.68164 0.78125 7.64648 0.351562ZM5.12695 19.9805L4.7168 20.6836L5.12695 21.3574H5.91797L6.32812 20.6836L5.91797 19.9805H5.12695Z"
										fill="#28FF52"
									></path>
								</svg>
							</div>
						</div>
					</div>
          <div class="wrapper-buttons__test">
						<edp-button-type
							type="cta01"
							text="Pedir Proposta"
							href="#"
							location="gta-28237-2"
							onclick="pedirProposta()"
							class="sc-edp-button-type-h sc-edp-button-type-s hydrated"
						></edp-button-type>
						<edp-button-type
							type="cta02"
							text="Personalizar proposta"
							href="#"
							location="gta-28237-1"
							onclick="scrollToProposta()"
							class="sc-edp-button-type-h sc-edp-button-type-s hydrated"
						></edp-button-type>
					</div>
				</div>
				<picture class="wrappre-image__test">
					<div class="card-image-mobile__test">
						<h3>
							<span>Resultado da simulação</span> <br />
							Energia Solar EDP
						</h3>
						<img width="127px" src="/media/qerjlxq0/edp-energiasolar-painelbateria.webp" alt="" />
					</div>
					<div class="card-result card-one">
						<div style="min-width: 64px">
							<i
								style="font-size: 64px"
								class="icon theme-icon--alt03 icon-bra-117 sc-edp-info-icons-slider-item"
							></i>
						</div>
						<div>
							<h3>Poupança Anual Estimada</h3>
							<p id="poupanca-anual-card">
							</p>
						</div>
					</div>
					<div class="card-result card-two">
						<div style="min-width: 64px">
							<i
								style="font-size: 64px"
								class="icon theme-icon--alt03 icon-bra-007 sc-edp-info-icons-slider-item"
							></i>
						</div>
						<div>
							<h3>Redução Consumo da Rede</h3>
							<p id="rcdr-card"></p>
						</div>
					</div>
					<div class="wrapper-mobile-button__test">
						<edp-button-type
							type="cta01"
							text="Pedir Proposta"
							href="#"
							location="gta-28237-2"
							onclick="pedirProposta()"
							class="sc-edp-button-type-h sc-edp-button-type-s hydrated"
						></edp-button-type>
						<edp-button-type
							type="cta02"
							text="Personalizar proposta"
							href="#"
							location="gta-28237-1"
							onclick="scrollToProposta()"
							class="sc-edp-button-type-h sc-edp-button-type-s hydrated"
						></edp-button-type>
					</div>
					<img class="image-desktop__test" src="/media/qerjlxq0/edp-energiasolar-painelbateria.webp" alt="Painel solar com uma bateria solar enconstada" width="200" height="200" loading="lazy" class="sc-edp-image">
				</picture>
			</div>
		</div>`;

let verify = false;
setInterval(() => {
	const modalResult = $(
		`edp-simulator-solar[modal-id="28041_1"] edp-simulator-solar-step-results`
	);
	console.log("verificando");
	if (modalResult.parent().parent().hasClass("active") && !verify) {
		console.log("encontrou", modalResult);
		verify = true;
		$(
			`edp-simulator-solar[modal-id="28041_1"] .edp-modal__titleContainer.sc-edp-modal`
		).hide();
		$(
			`edp-simulator-solar[modal-id="28041_1"] .edp-stepNav__group.sc-edp-stepnav`
		).html(htmlHero);
		$(".closeBtn.sc-edp-modal").css({
			position: "absolute",
			"z-index": 99999,
			right: 0,
			top: 20,
			color: "#fff",
		});
		$(".edp-modal__container.sc-edp-modal").css({ "padding-top": 0 });
		setTimeout(() => {
			const values = $(
				".result-card__front.sc-edp-simulator-solar-old-result-card.result-card__height .result-card__list-number.sc-edp-simulator-solar-old-result-card"
			);
			const anual = $(
				".result-card__front.sc-edp-simulator-solar-old-result-card.result-card__height .result-card__savings-interval.sc-edp-simulator-solar-old-result-card"
			)
				.first()
				.text();

			const paineis = values[0].innerText;
			const rcdr = values[2].innerText;
			$("#poupanca-anual-card").text("de ".concat(anual));
			$("#rcdr-card").text(rcdr);
			$("#poupanca-anual-result").text("Até ".concat(anual.split(" ")[2]));
			$("#reducao-consumo-da-rede-result").text(rcdr);
			$("#paineis-result").text(paineis);
		}, 300);
		$(".hero-result__test .btn-edp.btn-edp--cta02.right.sc-edp-button-type").on(
			"click",
			() => {
				const posicaoDestino = $(
					`edp-simulator-solar[modal-id="28041_1"] edp-simulator-solar-step-results`
				).position().top;
				console.log(posicaoDestino);
				$("html, edp-modal").stop().animate(
					{
						scrollTop: 1000,
					},
					500
				);
			}
		);
	}
	if (!modalResult.parent().parent().hasClass("active") && verify) {
		verify = false;
	}
}, 400);
const scrollToProposta = () => {
	let posicaoDestino = $(
		`.theme_marineBlue__electricGreen-std.hero-result__test`
	).height();
	posicaoDestino += $(
		".tabbed-container.sc-edp-simulator-solar-step-results"
	).height();
	posicaoDestino += 40;

	console.log(posicaoDestino);
	$("html, edp-modal").stop().animate(
		{
			scrollTop: posicaoDestino,
		},
		500
	);
};

const pedirProposta = () => {
	$("#SolarQuality2").prop("checked", true);
	$("#SolarQuality2").click();
	$(
		".btn-edp.btn-edp--cta01.m-01-c.right.btn-edp--sticky.sc-edp-button-type.m-03-bc.m-03-bg"
	).click();
};
